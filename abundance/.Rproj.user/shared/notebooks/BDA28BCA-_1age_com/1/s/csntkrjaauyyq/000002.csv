"0",""
"0","# TODO: check rec[is.na(i), ] - 295892 tag present as recap with no release"
"0","# info; removed here until raw datasheets can be reviewed (13-May-2020)"
"0",""
"0","Tagging$StripedBass <- subset("
"0","  Tagging[[""StripedBass""]],"
"0","  subset = !TagNum %in% ""295892"""
"0",")"
"0",""
"0","# to get only recaptured fish (tagging action = 2)"
"0","b_rec <- Tagging[[""StripedBass""]][[""TagAction""]] %in% 2"
"0",""
"0","# for matching with non-recaps"
"0","i <- match("
"0","  rec[[""TagNum""]],"
"0",")"
"0",""
"0","# to set up fields that will be used to hold appropriate age & sex info for"
"0","# recaptured fish (i.e., the protocol for abundance estimates has been to use"
"0","# release age+#years at large for age & release sex for recaptured fish)"
"0","Tagging$StripedBass$RelSex0 <- Tagging[[""StripedBass""]][[""RelSex""]]"
"0","Tagging$StripedBass$RelAge0 <- Tagging[[""StripedBass""]][[""RelAge""]]"
"0",""
"0","Tagging$StripedBass <- within(data = Tagging[[""StripedBass""]], expr = {"
"0","  "
"0","  # (recapture year - release year) + release age = age @ recapture"
"0","  RelAge0[b_rec] <- (RelYear[b_rec] - RelYear[!b_rec][i]) + RelAge[!b_rec][i]"
"0","  # if i=NA, then no positive match so use recaptured sex"
"0","  RelSex0[b_rec][is.na(i)] <- RelSex[b_rec][is.na(i)]"
"0","  "
"0","})"
"0",""
"0","# Tagging[[""StripedBass""]][!b_rec, ""RelSex""][is.na(i)]"
"0",""
"0","# section clean up"
"0","rm(b_rec, rec, i)"
