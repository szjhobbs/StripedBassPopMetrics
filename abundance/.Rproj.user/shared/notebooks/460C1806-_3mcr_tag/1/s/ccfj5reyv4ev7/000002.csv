"0",""
"0","catch$FykeMCR <- Map(f = function(y, ry) {"
"0",""
"0","  # to loop through list (by sex: m & f)"
"0","  o <- vapply(y, FUN = function(s) {"
"0","    "
"0","    # because we only want fyke trap data"
"0","    s <- subset(s, subset = CapMethod %in% 2)"
"0","    "
"0","    # because we only want previous year's recaptures (i.e., not within season)"
"0","    tr <- subset(tag_release, subset = RelYear < ry)"
"0","    "
"0","    # to get only recaptured fish"
"0","    b <- s[[""TagActionF""]] %in% ""R2"""
"0","    "
"0","    # match by tag number to get recaptured fish"
"0","    g <- s[b, ""TagNum""] %in% tr[[""TagNum""]]"
"0","    "
"0","    # will get counts used for MM & CC"
"0","    r <- table(s[[""TagActionF""]])"
"0","    "
"0","    # to limit on only legal sized fish"
"0","    i <- which(names(r) %in% c(""Ms"", ""S""))"
"0","    "
"0","    # output as marked, caught, & recaptured"
"0","    c(MM = r[[""Ml""]], CC = sum(r[-i]), RR = sum(g))"
"0","  }, FUN.VALUE = numeric(3L))"
"0","  "
"0","  # because output is by sex, but we want total"
"0","  rowSums(o)"
"0","  "
"0","}, y = catch[[""AgeAssign""]], ry = catch[[""RelYear""]])"
"0","# end Map"
"0",""
